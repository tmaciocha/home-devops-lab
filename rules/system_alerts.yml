groups:
- name: system_alerts
  rules:
  - alert: HighCPUUsage
    expr: 100 - (avg by (instance) (irate(node_cpu_seconds_total{mode="idle"}[5m])) * 100) > 80
    for: 5m
    labels:
      severity: warning
    annotations:
      summary: High CPU usage detected
      description: "CPU usage is above 80% for more than 5 minutes on instance {{ $labels.instance }}."
      runbook_url: "https://example.com/runbooks/high_cpu_usage"

  - alert: LowMemory
    expr: (node_memory_MemAvailable_bytes / node_memory_MemTotal_bytes) *100 < 10
    for: 5m
    labels:
      severity: critical
    annotations:
      summary: Low memory detected
      description: "Memory available is below 10% on instance {{ $labels.instance }}."
      runbook_url: "https://example.com/runbooks/low_memory"
  
  - alert: DiskSpaceLow
    expr: (node_filesystem_avail_bytes / node_filesystem_size_bytes) * 100 < 10
    for: 5m
    labels:
      severity: critical
    annotations:
      summary: Low disk space detected
      description: "Disk space available is below 10% on instance {{ $labels.instance }}."
      runbook_url: "https://example.com/runbooks/low_disk_space"
  
  - alert: NodeDown
    expr: up == 0
    for: 5m
    labels:
      severity: critical
    annotations:
      summary: Node is down
      description: "Node {{ $labels.instance }} is down."
      runbook_url: "https://example.com/runbooks/node_down" 

  - alert: HighCpuTemperature
    expr: node_hwmon_temp_celsius > 70
    for: 5m
    labels:
      severity: critical
    annotations:
      summary: High CPU temperature detected
      description: "CPU temperature is above 80 degrees Celsius on instance {{ $labels.instance }}."
      runbook_url: "https://example.com/runbooks/high_cpu_temperature"
      